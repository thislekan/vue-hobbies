webpackJsonp([1],{"0yi0":function(t,e){},"90AY":function(t,e){},NHnr:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=s("7+uW"),o={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("ul",{staticClass:"nav nav-pills"},[s("router-link",{attrs:{to:"/",tag:"li","active-class":"active",exact:""}},[s("a",[t._v("Home")])]),t._v(" "),s("router-link",{directives:[{name:"show",rawName:"v-show",value:t.visible,expression:"visible"}],attrs:{to:"/signup",tag:"li","active-class":"active"}},[s("a",[t._v("Sign up")])]),t._v(" "),s("router-link",{directives:[{name:"show",rawName:"v-show",value:t.visible,expression:"visible"}],attrs:{to:"/login",tag:"li","active-class":"active"}},[s("a",[t._v("Log in")])]),t._v(" "),s("router-link",{attrs:{to:"/hobbies",tag:"li","active-class":"active"}},[s("a",[t._v("Hobbies")])])],1)])},staticRenderFns:[]};var n=s("VU/8")({computed:{visible:function(){return this.$store.state.visible}}},o,!1,function(t){s("qSJu")},"data-v-c945fa5c",null).exports,a={components:{appHeader:n},methods:{getStarted:function(){this.$router.push("/signup")}}},r={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"home"},[this._m(0),this._v(" "),this._m(1),this._v(" "),e("button",{staticClass:"btn btn-success",on:{click:this.getStarted}},[this._v("Get Started")])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"col-xs-12"},[e("h1",{staticClass:"text-center"},[this._v("Hobbies")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("div",{staticClass:"col-xs-12"},[e("h3",{staticClass:"text-center",staticStyle:{color:"white"}},[this._v("What are your hobbies?")])])])}]};var c=s("VU/8")(a,r,!1,function(t){s("90AY")},"data-v-3753ccc4",null).exports,l={name:"App",components:{appHeader:n,appHome:c}},u={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("app-header",{staticClass:"comp-header"}),this._v(" "),e("transition",{attrs:{name:"fade",mode:"out-in"}},[e("router-view",{staticClass:"comp"},[e("app-home")],1)],1)],1)},staticRenderFns:[]};var h=s("VU/8")(l,u,!1,function(t){s("jpIW")},null,null).exports,f=s("/ocq"),d=s("mvHQ"),v=s.n(d),m=s("//Fk"),p=s.n(m),b=s("woOf"),g=s.n(b);var _={data:function(){return{isNotified:!1,isLoading:!1}},methods:{logIn:function(){var t=this,e={email:this.$refs.email.value,password:this.$refs.password.value};if(""===e.email||""===e.password)this.isLoading=!1,this.$refs.notifyUser.innerText="Input fields cannot be empty. Click to dismiss.",this.isNotified=!0;else if(e.password.length<6)this.isLoading=!1,this.$refs.notifyUser.innerText="Your password has to be equal to or greater than 6. Click to dismiss",this.isNotified=!0;else{this.isLoading=!0;var s={method:"POST",headers:{"Content-Type":"application/json"},body:v()(e)};fetch("/api/user/login",s).then(function(t){if(t.headers.has("x-auth")){var e=t.headers.get("x-auth");return sessionStorage.setItem("token",e),t.json()}var s=g()({},t,{status:t.status,statusText:"Incorrect email or password"});return p.a.reject(s)}).then(function(e){sessionStorage.setItem("userID",e._id),sessionStorage.setItem("user",e.name),t.authenticateUser("users/me")}).catch(function(e){t.isLoading=!1,t.$refs.notifyUser.innerText="An error occured. Try again? Click to dismiss",t.isNotified=!0})}},authenticateUser:function(){var t=this,e={method:"GET",headers:{"x-auth":sessionStorage.getItem("token"),"Content-Type":"application/json"}};fetch("/api/user/confirm",e).then(function(e){if(200!==e.status){var s=g()({},e,{status:e.status,statusText:e.statusText});return p.a.reject(s)}setTimeout(function(){t.$router.push("/hobbies")},2e3)}).catch(function(e){t.isLoading=!1,t.$refs.notifyUser.innerText="User not authorized. Click to dismiss",t.isNotified=!0})},dismiss:function(){this.isNotified=!1}}},y={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("br"),t._v(" "),s("br"),t._v(" "),s("div",[s("div",{staticClass:"col-lg-6 col-lg-offset-3 col-sm-8 col-sm-offset-2 col-xs-12",staticStyle:{position:"relative"}},[s("div",{staticClass:"text-center loader-div"},[s("div",{directives:[{name:"show",rawName:"v-show",value:t.isLoading,expression:"isLoading"}],staticClass:"loader"})]),t._v(" "),s("div",{staticClass:"form-group"},[s("p",{directives:[{name:"show",rawName:"v-show",value:t.isNotified,expression:"isNotified"}],ref:"notifyUser",staticClass:"alert alert-danger",on:{click:t.dismiss}})]),t._v(" "),s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"email"}},[t._v("Email")]),t._v(" "),s("input",{ref:"email",staticClass:"form-control",attrs:{type:"email",name:"email",placeholder:"user@email.com"}})]),t._v(" "),s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"password"}},[t._v("Password")]),t._v(" "),s("input",{ref:"password",staticClass:"form-control",attrs:{type:"password",name:"password"}})])]),t._v(" "),s("div",{staticClass:"col-xs-12 col-sm-4 col-sm-offset-4 col-lg-2 col-lg-offset-5"},[s("button",{staticClass:"btn btn-success",on:{click:t.logIn}},[t._v("Log in")])])])])},staticRenderFns:[]};var C=s("VU/8")(_,y,!1,function(t){s("0yi0")},null,null).exports;function w(t){return t.json().then(function(e){if(t.ok)return e;var s=g()({},t,{status:t.status,statusText:t.statusText});return p.a.reject(s)})}function x(t){var e={method:"POST",headers:{"Content-Type":"application/json","x-auth":sessionStorage.getItem("token")},body:v()(t)};fetch("/api/user/sendEmail",e).then(function(t){if(t.ok)return t.json()}).then(function(t){return console.log(t)}).catch(function(t){return console.log(t)})}function S(t){var e={method:"POST",headers:{"Content-Type":"application/json","x-auth":sessionStorage.getItem("token")},body:v()({text:"You created a new hobby: "+t})};fetch("/api/user/sendText",e).then(function(t){if(t.ok)return t.json()}).then(function(t){return console.log(t)}).catch(function(t){return console.log(t)})}var T={data:function(){return{user:"User",hobbyList:[],newHobby:"One word reply to your hobby?",show:!1}},methods:{previewHobby:function(t){this.newHobby="I love "+t.target.value},showHobby:function(){var t=this.$refs.newHobby.value;this.show=!0;var e=[],s="/api/hobbies";if(""!==t){this.hobbyList.push(t);for(var i=0;i<this.hobbyList.length;i++){var o=this.hobbyList[i];e.push(o)}var n={method:"POST",headers:{"Content-Type":"application/json","x-auth":sessionStorage.getItem("token")},body:v()({hobbies:e})};if(this.hobbyList.length>1){n.method="PUT";var a=sessionStorage.getItem("userID");s=s+"/"+localStorage.getItem(a+"ID"),fetch(s,n).then(function(t){return t.json()}).then(function(e){console.log(e),x({subject:"New Hobby created",text:t}),S(t)}).catch(function(t){return console.log(t)})}else fetch(s,n).then(w).then(function(e){console.log(e);var s=sessionStorage.getItem("userID");localStorage.setItem(s+"ID",e._id),x({subject:"New Hobby created",text:t}),S(t)}).catch(function(t){return console.log(t)})}this.newHobby="One word reply to your hobby?"},logOut:function(){var t=this,e={method:"DELETE",headers:{"Content-Type":"application/json","x-auth":sessionStorage.getItem("token")}};fetch("/api/user/logout",e).then(function(e){200===e.status&&(sessionStorage.clear(),t.$router.push("/"))}).catch(function(t){return console.log(t)})},deleteHobby:function(t){this.hobbyList.splice(t,1);for(var e=[],s=0;s<this.hobbyList.length;s++){var i=this.hobbyList[s];e.push(i)}var o={method:"PUT",headers:{"Content-Type":"application/json","x-auth":sessionStorage.getItem("token")},body:v()({hobbies:e})},n=sessionStorage.getItem("userID"),a=localStorage.getItem(n+"ID");fetch("/api/hobbies/"+a,o).then(function(t){return t.json()}).then(function(t){return console.log(t)}).catch(function(t){return console.log(t)})}},created:function(){var t=this;this.$store.commit("alterState"),sessionStorage.getItem("user")&&(this.user=sessionStorage.getItem("user")),sessionStorage.getItem("token")||this.$router.push("/");var e=sessionStorage.getItem("userID"),s=localStorage.getItem(e+"ID");if(s){var i={method:"GET",headers:{"Content-Type":"application/json","x-auth":sessionStorage.getItem("token")}};fetch("/api/hobbies/"+s,i).then(w).then(function(e){for(var s=0;s<e.hobbies.hobbies.length;s++){var i=e.hobbies.hobbies[s];t.hobbyList.push(i)}}).catch(function(t){return console.log(t)}),this.show=!0}},destroyed:function(){this.$store.commit("alterState",!0)}},I={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"container"},[s("h1",{staticClass:"text-center"},[t._v("Hello "+t._s(t.user))]),t._v(" "),s("br"),s("br"),t._v(" "),s("div",{staticClass:"row"},[s("div",{staticClass:"col-xs-12 col-sm-5 col-lg-4",attrs:{id:"box1"}},[s("br"),t._v(" "),s("div",{staticClass:"form-group"},[s("div",{staticClass:"input-group"},[s("input",{ref:"newHobby",staticClass:"form-control",attrs:{type:"text",name:"",id:"",placeholder:"Enter your replies here"},on:{keyup:t.previewHobby}}),t._v(" "),s("span",{staticClass:"input-group-btn"},[s("button",{staticClass:"btn btn-success",on:{click:t.showHobby}},[t._v("Submit")])])]),t._v(" "),s("br"),t._v(" "),s("div",{staticClass:"form-group"},[s("p",{staticClass:"form-control"},[t._v(t._s(t.newHobby))])])])]),t._v(" "),s("div",{staticClass:"col-lg-4 col-sm-2"}),t._v(" "),s("div",{staticClass:"col-xs-12 col-sm-5 col-lg-4",attrs:{id:"box2"}},[s("p",{staticClass:"text-center",staticStyle:{"margin-top":"10px","margin-bottom":"10px"}},[t._v("Hobbies")]),t._v(" "),s("div",{staticClass:"form-group"},[s("ul",{staticClass:"list-group"},t._l(t.hobbyList,function(e,i){return t.show?s("li",{key:e,staticClass:"list-group-item",attrs:{name:"",id:""},on:{click:function(e){t.deleteHobby(i)}}},[s("p",[t._v(t._s(e))])]):t._e()}))]),t._v(" "),t._m(0)])]),t._v(" "),s("br"),t._v(" "),s("br"),t._v(" "),s("br"),t._v(" "),s("div",{staticClass:"row"},[s("div",{staticClass:"col-xs-12 col-sm-4 col-sm-offset-4 col-lg-4 col-lg-offset-4 text-center"},[s("button",{staticClass:"btn btn-danger similar-btn",attrs:{id:"refresh"},on:{click:t.logOut}},[t._v("Log out")])])])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"text-center",staticStyle:{"margin-bottom":"10px"}},[e("button",{staticClass:"btn btn-info similar-btn"},[this._v("Refresh")])])}]};var k=s("VU/8")(T,I,!1,function(t){s("rbuU")},null,null).exports;function $(t){return t.json().then(function(e){if(200===t.status)return e;var s=g()({},t,{status:t.status,statusText:t.statusText});return p.a.reject(s)})}var N={data:function(){return{isNotified:!1,isLoading:!1}},methods:{signUp:function(){var t=this,e={email:this.$refs.email.value,name:this.$refs.name.value,password:this.$refs.password.value,phone:this.$refs.phone.value};if(""===e.email||""===e.phone||""===e.password||""===e.name)this.isLoading=!1,this.$refs.notifyUser.innerText="Input fields cannot be empty. Click to dismiss.",this.isNotified=!0;else if(e.password.length<6)this.isLoading=!1,this.$refs.notifyUser.innerText="Your password has to be equal to or greater than 6. Click to dismiss",this.isNotified=!0;else{this.isLoading=!0;var s={method:"POST",headers:{"Content-Type":"application/json"},body:v()(e)};fetch("/api/user",s).then($).then(function(e){console.log(e),setTimeout(function(){t.$router.push("/login")},2e3)}).catch(function(e){t.isLoading=!1,t.$refs.notifyUser.innerText="An error occured. Try again? Click to dismiss",t.isNotified=!0})}},dismiss:function(){this.isNotified=!1},inform:function(t){t.target===this.$refs.phone?(this.$refs.notifyUser.className="alert alert-warning",this.$refs.notifyUser.innerText="Please, ensure you register with a valid phone number. Click to dismiss",this.isNotified=!0):(this.$refs.notifyUser.className="alert alert-warning",this.$refs.notifyUser.innerText="Please, ensure you register with a valid email. Click to dismiss",this.isNotified=!0)}}},U={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("br"),t._v(" "),s("br"),t._v(" "),s("div",[s("div",{staticClass:"col-lg-6 col-lg-offset-3 col-sm-8 col-sm-offset-2 col-xs-12",staticStyle:{position:"relative"}},[s("div",{staticClass:"form-group loader-div"},[s("div",{directives:[{name:"show",rawName:"v-show",value:t.isLoading,expression:"isLoading"}],staticClass:"loader"})]),t._v(" "),s("div",{staticClass:"form-group"},[s("p",{directives:[{name:"show",rawName:"v-show",value:t.isNotified,expression:"isNotified"}],ref:"notifyUser",staticClass:"alert alert-danger",on:{click:t.dismiss}})]),t._v(" "),s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"name"}},[t._v("Name")]),t._v(" "),s("input",{ref:"name",staticClass:"form-control",attrs:{type:"text",name:"name",placeholder:"User's name"}})]),t._v(" "),s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"phone"}},[t._v("Phone Number")]),t._v(" "),s("input",{ref:"phone",staticClass:"form-control",attrs:{name:"phone",placeholder:"08133000000"},on:{focus:t.inform}})]),t._v(" "),s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"email"}},[t._v("Email")]),t._v(" "),s("input",{ref:"email",staticClass:"form-control",attrs:{type:"email",name:"email",placeholder:"user@email.com"},on:{focus:t.inform}})]),t._v(" "),s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"password"}},[t._v("Password")]),t._v(" "),s("input",{ref:"password",staticClass:"form-control",attrs:{type:"password",name:"password"}})])]),t._v(" "),s("div",{staticClass:"col-xs-12 col-sm-4 col-sm-offset-4 col-lg-2 col-lg-offset-5"},[s("button",{staticClass:"btn btn-success",on:{click:t.signUp}},[t._v("Sign Up")])])])])},staticRenderFns:[]};var L=s("VU/8")(N,U,!1,function(t){s("rHqP")},null,null).exports;i.a.use(f.a);var H=new f.a({routes:[{path:"/",name:"Home",component:c},{path:"/login",name:"Login",component:C},{path:"/signup",name:"Signup",component:L},{path:"/hobbies",name:"Hobbies",component:k}],mode:"history"}),j=s("NYxO");i.a.use(j.a);var E=new j.a.Store({state:{visible:!0},mutations:{alterState:function(t,e){t.visible=e||!1}}});i.a.config.productionTip=!1,new i.a({el:"#app",router:H,store:E,render:function(t){return t(h)}})},jpIW:function(t,e){},qSJu:function(t,e){},rHqP:function(t,e){},rbuU:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.604823213e906ef95453.js.map