webpackJsonp([1],{"90AY":function(t,e){},IU63:function(t,e){},Icya:function(t,e){},NHnr:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=s("7+uW"),n={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("ul",{staticClass:"nav nav-pills"},[s("router-link",{attrs:{to:"/",tag:"li","active-class":"active",exact:""}},[s("a",[t._v("Home")])]),t._v(" "),s("router-link",{directives:[{name:"show",rawName:"v-show",value:t.visible,expression:"visible"}],attrs:{to:"/signup",tag:"li","active-class":"active"}},[s("a",[t._v("Sign up")])]),t._v(" "),s("router-link",{directives:[{name:"show",rawName:"v-show",value:t.visible,expression:"visible"}],attrs:{to:"/login",tag:"li","active-class":"active"}},[s("a",[t._v("Log in")])]),t._v(" "),s("router-link",{attrs:{to:"/hobbies",tag:"li","active-class":"active"}},[s("a",[t._v("Hobbies")])])],1)])},staticRenderFns:[]};var a=s("VU/8")({computed:{visible:function(){return this.$store.state.visible}}},n,!1,function(t){s("qSJu")},"data-v-c945fa5c",null).exports,r={components:{appHeader:a},methods:{getStarted:function(){this.$router.push("/signup")}}},i={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"home"},[this._m(0),this._v(" "),this._m(1),this._v(" "),e("button",{staticClass:"btn btn-success",on:{click:this.getStarted}},[this._v("Get Started")])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"col-xs-12"},[e("h1",{staticClass:"text-center"},[this._v("Hobbies")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("div",{staticClass:"col-xs-12"},[e("h3",{staticClass:"text-center",staticStyle:{color:"white"}},[this._v("What are your hobbies?")])])])}]};var c=s("VU/8")(r,i,!1,function(t){s("90AY")},"data-v-3753ccc4",null).exports,l={name:"App",components:{appHeader:a,appHome:c}},u={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("app-header",{staticClass:"comp-header"}),this._v(" "),e("transition",{attrs:{name:"fade",mode:"out-in"}},[e("router-view",{staticClass:"comp"},[e("app-home")],1)],1)],1)},staticRenderFns:[]};var h=s("VU/8")(l,u,!1,function(t){s("jpIW")},null,null).exports,v=s("/ocq"),f=s("mvHQ"),p=s.n(f),m=s("//Fk"),b=s.n(m),d=s("woOf"),g=s.n(d);var _={methods:{logIn:function(){var t=this,e={email:this.$refs.email.value,password:this.$refs.password.value},s={method:"POST",headers:{"Content-Type":"application/json"},body:p()(e)};fetch("/api/user/login",s).then(function(t){if(t.headers.has("x-auth")){var e=t.headers.get("x-auth");return sessionStorage.setItem("token",e),t.json()}var s=g()({},t,{status:t.status,statusText:"Incorrect email or password"});return b.a.reject(s)}).then(function(e){sessionStorage.setItem("userID",e._id),sessionStorage.setItem("user",e.name),t.authenticateUser("users/me")}).catch(function(t){return console.log(t)})},authenticateUser:function(){var t=this,e={method:"GET",headers:{"x-auth":sessionStorage.getItem("token"),"Content-Type":"application/json"}};fetch("/api/user/confirm",e).then(function(e){if(200!==e.status){var s=g()({},e,{status:e.status,statusText:e.statusText});return b.a.reject(s)}setTimeout(function(){t.$router.push("/hobbies")},2e3)}).catch(function(t){return console.log(t)})}}},y={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("br"),t._v(" "),s("br"),t._v(" "),s("div",[s("div",{staticClass:"col-lg-6 col-lg-offset-3 col-sm-8 col-sm-offset-2 col-xs-12"},[s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"email"}},[t._v("Email")]),t._v(" "),s("input",{ref:"email",staticClass:"form-control",attrs:{type:"email",name:"email",placeholder:"user@email.com"}})]),t._v(" "),s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"password"}},[t._v("Password")]),t._v(" "),s("input",{ref:"password",staticClass:"form-control",attrs:{type:"password",name:"password"}})])]),t._v(" "),s("div",{staticClass:"col-xs-12 col-sm-4 col-sm-offset-4 col-lg-2 col-lg-offset-5"},[s("button",{staticClass:"btn btn-success",on:{click:t.logIn}},[t._v("Log in")])])])])},staticRenderFns:[]};var C=s("VU/8")(_,y,!1,function(t){s("Icya")},"data-v-775a7c90",null).exports;function x(t){return t.json().then(function(e){if(t.ok)return e;var s=g()({},t,{status:t.status,statusText:t.statusText});return b.a.reject(s)})}function w(t){var e={method:"POST",headers:{"Content-Type":"application/json","x-auth":sessionStorage.getItem("token")},body:p()(t)};fetch("/api/user/sendEmail",e).then(function(t){if(t.ok)return t.json()}).then(function(t){return console.log(t)}).catch(function(t){return console.log(t)})}function S(t){var e={method:"POST",headers:{"Content-Type":"application/json","x-auth":sessionStorage.getItem("token")},body:p()({text:"You created a new hobby: "+t})};fetch("/api/user/sendText",e).then(function(t){if(t.ok)return t.json()}).then(function(t){return console.log(t)}).catch(function(t){return console.log(t)})}var I={data:function(){return{user:"User",hobbyList:[],newHobby:"One word reply to your hobby?",show:!1}},methods:{previewHobby:function(t){this.newHobby="I love "+t.target.value},showHobby:function(){var t=this.$refs.newHobby.value;this.show=!0;var e=[],s="/api/hobbies";if(""!==t){this.hobbyList.push(t);for(var o=0;o<this.hobbyList.length;o++){var n=this.hobbyList[o];e.push(n)}var a={method:"POST",headers:{"Content-Type":"application/json","x-auth":sessionStorage.getItem("token")},body:p()({hobbies:e})};if(this.hobbyList.length>1){a.method="PUT";var r=sessionStorage.getItem("userID");s=s+"/"+localStorage.getItem(r+"ID"),fetch(s,a).then(function(t){return t.json()}).then(function(e){console.log(e),w({subject:"New Hobby created",text:t}),S(t)}).catch(function(t){return console.log(t)})}else fetch(s,a).then(x).then(function(e){console.log(e);var s=sessionStorage.getItem("userID");localStorage.setItem(s+"ID",e._id),w({subject:"New Hobby created",text:t}),S(t)}).catch(function(t){return console.log(t)})}this.newHobby="One word reply to your hobby?"},logOut:function(){var t=this,e={method:"DELETE",headers:{"Content-Type":"application/json","x-auth":sessionStorage.getItem("token")}};fetch("/api/user/logout",e).then(function(e){200===e.status&&(sessionStorage.clear(),t.$router.push("/"))}).catch(function(t){return console.log(t)})},deleteHobby:function(t){this.hobbyList.splice(t,1);for(var e=[],s=0;s<this.hobbyList.length;s++){var o=this.hobbyList[s];e.push(o)}var n={method:"PUT",headers:{"Content-Type":"application/json","x-auth":sessionStorage.getItem("token")},body:p()({hobbies:e})},a=sessionStorage.getItem("userID"),r=localStorage.getItem(a+"ID");fetch("/api/hobbies/"+r,n).then(function(t){return t.json()}).then(function(t){return console.log(t)}).catch(function(t){return console.log(t)})}},created:function(){var t=this;this.$store.commit("alterState"),sessionStorage.getItem("user")&&(this.user=sessionStorage.getItem("user")),sessionStorage.getItem("token")||this.$router.push("/");var e=sessionStorage.getItem("userID"),s=localStorage.getItem(e+"ID");if(s){var o={method:"GET",headers:{"Content-Type":"application/json","x-auth":sessionStorage.getItem("token")}};fetch("/api/hobbies/"+s,o).then(x).then(function(e){for(var s=0;s<e.hobbies.hobbies.length;s++){var o=e.hobbies.hobbies[s];t.hobbyList.push(o)}}).catch(function(t){return console.log(t)}),this.show=!0}},destroyed:function(){this.$store.commit("alterState",!0)}},T={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"container"},[s("h1",[t._v("Hello "+t._s(t.user))]),t._v(" "),s("br"),s("br"),t._v(" "),s("div",{staticClass:"row"},[s("div",{staticClass:"col-xs-12 col-sm-5 col-lg-4",attrs:{id:"box1"}},[s("br"),t._v(" "),s("div",{staticClass:"form-group"},[s("div",{staticClass:"input-group"},[s("input",{ref:"newHobby",staticClass:"form-control",attrs:{type:"text",name:"",id:"",placeholder:"Enter your replies here"},on:{keyup:t.previewHobby}}),t._v(" "),s("span",{staticClass:"input-group-btn"},[s("button",{staticClass:"btn btn-success",on:{click:t.showHobby}},[t._v("Submit")])])]),t._v(" "),s("br"),t._v(" "),s("div",{staticClass:"form-group"},[s("p",{staticClass:"form-control"},[t._v(t._s(t.newHobby))])])])]),t._v(" "),s("div",{staticClass:"col-lg-4 col-sm-2"}),t._v(" "),s("div",{staticClass:"col-xs-12 col-sm-5 col-lg-4",attrs:{id:"box2"}},[s("p",{staticClass:"text-center",staticStyle:{"margin-top":"10px","margin-bottom":"10px"}},[t._v("Hobbies")]),t._v(" "),s("div",{staticClass:"form-group"},[s("ul",{staticClass:"list-group"},t._l(t.hobbyList,function(e,o){return t.show?s("li",{key:e,staticClass:"list-group-item",attrs:{name:"",id:""},on:{click:function(e){t.deleteHobby(o)}}},[s("p",[t._v(t._s(e))])]):t._e()}))]),t._v(" "),t._m(0)])]),t._v(" "),s("br"),t._v(" "),s("br"),t._v(" "),s("br"),t._v(" "),s("div",{staticClass:"row"},[s("div",{staticClass:"col-xs-12 col-sm-4 col-sm-offset-4 col-lg-4 col-lg-offset-4 text-center"},[s("button",{staticClass:"btn btn-danger similar-btn",attrs:{id:"refresh"},on:{click:t.logOut}},[t._v("Log out")])])])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"text-center",staticStyle:{"margin-bottom":"10px"}},[e("button",{staticClass:"btn btn-info similar-btn"},[this._v("Refresh")])])}]};var H=s("VU/8")(I,T,!1,function(t){s("XOHh")},null,null).exports;function k(t){return t.json().then(function(e){if(200===t.status)return e;var s=g()({},t,{status:t.status,statusText:t.statusText});return b.a.reject(s)})}var j={methods:{signUp:function(){var t=this,e={email:this.$refs.email.value,name:this.$refs.name.value,password:this.$refs.password.value,phone:this.$refs.phone.value},s={method:"POST",headers:{"Content-Type":"application/json"},body:p()(e)};fetch("/api/user",s).then(k).then(function(e){console.log(e),setTimeout(function(){t.$router.push("/login")},2e3)}).catch(function(t){return console.log(t)})}}},$={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("br"),t._v(" "),s("br"),t._v(" "),s("div",[s("div",{staticClass:"col-lg-6 col-lg-offset-3 col-sm-8 col-sm-offset-2 col-xs-12"},[s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"name"}},[t._v("Name")]),t._v(" "),s("input",{ref:"name",staticClass:"form-control",attrs:{type:"text",name:"name",placeholder:"User's name"}})]),t._v(" "),s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"phone"}},[t._v("Phone Number")]),t._v(" "),s("input",{ref:"phone",staticClass:"form-control",attrs:{type:"number",name:"phone",placeholder:"08133000000"}})]),t._v(" "),s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"email"}},[t._v("Email")]),t._v(" "),s("input",{ref:"email",staticClass:"form-control",attrs:{type:"email",name:"email",placeholder:"user@email.com"}})]),t._v(" "),s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"password"}},[t._v("Password")]),t._v(" "),s("input",{ref:"password",staticClass:"form-control",attrs:{type:"password",name:"password"}})])]),t._v(" "),s("div",{staticClass:"col-xs-12 col-sm-4 col-sm-offset-4 col-lg-2 col-lg-offset-5"},[s("button",{staticClass:"btn btn-success",on:{click:t.signUp}},[t._v("Sign Up")])])])])},staticRenderFns:[]};var E=s("VU/8")(j,$,!1,function(t){s("IU63")},null,null).exports;o.a.use(v.a);var U=new v.a({routes:[{path:"/",name:"Home",component:c},{path:"/login",name:"Login",component:C},{path:"/signup",name:"Signup",component:E},{path:"/hobbies",name:"Hobbies",component:H}],mode:"history"}),L=s("NYxO");o.a.use(L.a);var O=new L.a.Store({state:{visible:!0},mutations:{alterState:function(t,e){t.visible=e||!1}}});o.a.config.productionTip=!1,new o.a({el:"#app",router:U,store:O,render:function(t){return t(h)}})},XOHh:function(t,e){},jpIW:function(t,e){},qSJu:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.dbc200141f8447b5abf2.js.map